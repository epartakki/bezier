<!DOCTYPE html>
<html>
<head>
<title>Bezier Curves</title>

<body style="background-color:lightblue;">
  <p style="font-size:40px; color:white;"><b>Bezier Curves</b></p>

<script>

    //improve?  name fix
    var canvas;    // DOM object corresponding to the canvas
    var graphics;  // 2D graphics context for drawing on the canvas
    var numPoints = 100;

    function bezierLineHelper(t, p0, p1) {
      var pReturn = {x:1, y:1};
      pReturn.x = (1 - t)*p0.x + t*p1.x;
      pReturn.y = (1 - t)*p0.y + t*p1.y;

      return pReturn;
    }

    function bezierLine(p0, p1) {
      graphics.beginPath();
      graphics.moveTo(p0.x, p0.y);
      var increment_x = (p1.x - p0.x)/numPoints 
      var increment_y = (p1.y - p0.y)/numPoints      
      old_x = p0.x;
      old_y = p0.y
      for (i = 0; i < numPoints; i++) {
        next_x = old_x + increment_x;
        next_y = old_y + increment_y;

        graphics.lineTo(next_x, next_y);
        graphics.stroke();

        old_x = next_x;
        old_y = next_y
      }
    }

    function bezierQuadHelper(t, p0, p1, p2) {
      var p00 = {x:1, y:1};
      var p01 = {x:1, y:1};
      var pReturn = {x:1, y:1};

      p00 = bezierLineHelper(t, p0, p1);
      p01 = bezierLineHelper(t, p1, p2);
      pReturn = bezierLineHelper(t, p00, p01);

      return pReturn;

    }
    

    function bezierQuad(p0, p1, p2) {
      graphics.beginPath();
      graphics.moveTo(p0.x, p0.y);
      var increment = 1/numPoints;

      for (var i = 1; i <= numPoints; i++) {

        pnext = bezierQuadHelper(i * increment, p0, p1, p2);

        graphics.lineTo(pnext.x, pnext.y);
        graphics.stroke();
      }
    }

    function bezierCubicHelper(t, p0, p1, p2, p3) {
      var p00 = {x:1, y:1};
      var p01 = {x:1, y:1};
      var pReturn = {x:1, y:1};

      p00 = bezierQuadHelper(t, p0, p1, p2)
      p01 = bezierQuadHelper(t, p1, p2, p3)

      pReturn = bezierLineHelper(t, p00, p01);

      return pReturn;

    }

    function bezierCubic(p0, p1, p2, p3) {
      graphics.beginPath();
      graphics.moveTo(p0.x, p0.y);
      var increment = 1/numPoints;

      for (var i = 1; i <= numPoints; i++) {

        pnext = bezierCubicHelper(i * increment, p0, p1, p2, p3);

        graphics.lineTo(pnext.x, pnext.y);
        graphics.stroke();
      }
    }

    function bezierQuadFormula(p0, p1, p2, p3) {
      graphics.beginPath();
      graphics.moveTo(p0.x, p0.y);
      var increment = 1/numPoints;
      var pnext = {x:1,y:1};
      var t = 0;

      for (var i = 0; i < numPoints; i++) {
        t += increment;

        pnext.x = (1-t)*(1-t)*p0.x + 2*t*(1-t)*p1.x + t*t*p2.x;

        pnext.y = (1-t)*(1-t)*p0.y + 2*t*(1-t)*p1.y + t*t*p2.y;

        graphics.lineTo(pnext.x, pnext.y);
        graphics.stroke();
      }
    }

    function bezierCubicFormula(p0, p1, p2, p3) {
      graphics.beginPath();
      graphics.moveTo(p0.x, p0.y);
      var increment = 1/numPoints;
      var pnext = {x:1,y:1};
      var t = 0;

      for (var i = 0; i < numPoints; i++) {
        t += increment;

        pnext.x = (1-t)*(1-t)*(1-t)*p0.x + 3*t*(1-t)*(1-t)*p1.x + 3*t*t*(1-t)*p2.x + t*t*t*p3.x;

        pnext.y = (1-t)*(1-t)*(1-t)*p0.y + 3*t*(1-t)*(1-t)*p1.y + 3*t*t*(1-t)*p2.y + t*t*t*p3.y;

        graphics.lineTo(pnext.x, pnext.y);
        graphics.stroke();
      }
    }

    function draw() {

        // set up control points
        var p0 = {x:200, y:110};  // shorthand for: p0.x = 200; p0.y=110;
        var p1 = {x:200, y:300};

        var r1 = {x:30, y:50};

        var q1 = {x:300, y:50};
        var q2 = {x:330, y:140};

        // draw 3 bezier curves, all starting at p0 and ending at p1
        bezierLine(p0, p1);
        bezierQuadFormula(p0, r1, p1);
        bezierCubicFormula(p0, q1, q2, p1);
        // notice the difference between the quadratic and cubic curves

        for (var i = 0; i < 100; i++)  {
          bezierQuadFormula(p0, r1, p1);
          bezierCubicFormula(p0, q1, q2, p1);
        }

        graphics.lineWidth = 15;
        var top = 300;
        var bottom = 300;

		E1 = {x:50, y:top};
        E2 = {x:100, y:top};
        E3 = {x:50, y:top-40};
        E4 = {x:100, y:top-40};
        E5 = {x:50, y:bottom};
		E6 = {x:100, y:bottom};

        bezierLine(E1, E2);
        bezierLine(E1, E3);
        bezierLine(E3, E4);
        bezierLine(E3, E5);
        bezierLine(E5, E6);
    }

        function init() {
        canvas = document.getElementById("theCanvas");
        graphics = canvas.getContext("2d");
        draw();  // draw something on the canvas
    }
</script>


</head>
<body onload="init()">
    <canvas id="theCanvas" width="640" height="480"></canvas>
</body>
</html>
